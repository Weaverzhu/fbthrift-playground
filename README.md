# Steps to reproduce cpptools-srv process crash

tested in debian 11 (bullseye)

1. run `./scripts/build.sh deps`
  * there may be gcc compiler bug when building fbthrift, `rm -rf build-fbthrift` and run `./scripts/build.sh deps` again
2. run `python3 scripts/merge_compdb.py` to geneerate a compile database in ${workspaceFolder}
  * the configuration in `.vscode` should be set already
3. open `./playground/echo/client.cc`, this should enable cpptools to start running
  * run `ps -ef | grep cpptools` to get the pid and run `gdb -p $pid`
4. open `build/playground/idl/gen-cpp2/EchoServiceAsyncClient.h`, this is a file generated by fbthrift. this would trigger the process crash


you can also look at `./scripts/update_fb_deps.sh` to change fbthrift and its dependencies' branch, default is tag `v2022.01.03.00`

# Use docker & remote-containers to analyze this issue

```sh
docker build -t playground . --network=host
docker run -td --network=host --cap-add=SYS_PTRACE --security-opt seccomp=unconfined playground bash # to enable gdb in docker some options are added
```

then attach to the container using `Remote-container` extension, and skip `Step 1` from `Steps to reproduce cpptools-srv process crash`